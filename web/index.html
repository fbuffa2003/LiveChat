<!DOCTYPE html>
<html lang=en>
    <head>
        <title>Sample App</title>
        <script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="//cdn.livechatinc.com/boilerplate/1.0.js"></script>
       
        <link rel="stylesheet" href="//cdn.livechatinc.com/boilerplate/1.0.css">

        
        <script type="text/javascript">
            function getPropertyValue(data, propertyName) {
                return undefined === data[propertyName] ? '' : data[propertyName];
            }
            LiveChat.on("customer_profile", function(data) {
                $('#visitorID').html(getPropertyValue(data, 'id'));
                $('#visitorName').html(getPropertyValue(data, 'name'));
                $('#visitorEmail').html(getPropertyValue(data, 'email'));
                $('#chatID').html(getPropertyValue(data.chat, 'id'));
                $('#groupID').html(getPropertyValue(data.chat, 'groupID'));
                $('#BpmUrl').html(getPropertyValue(data.chat, 'BpmUrl'));
                
                
                     function Get() {
            Response.status(200)
            .header("Access-Control-Allow-Origin", request.getHeader("Origin"))
            .header("Access-Control-Allow-Headers", "origin, content-type, accept, authorization")
            .header("Access-Control-Allow-Credentials", "true")
            .header("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS, HEAD")
            .header("Access-Control-Max-Age", "1209600")
            .entity(applicationSyncService.buildApplicationData())
            .build();
            
            
            var resultDiv = $("#resultDivContainer");
      $(document).ready(function () {
            $.ajax({

  xhrFields: {
        withCredentials: true
    },
headers: { "BPMLOADER": "5devstz1sqvhqlcqjfb5m3au" },
                url: "https://0384564-sales-enterprise-marketing-service-enterprise-demo.bpmonline.com/0/ServiceModel/EntityDataService.svc/ContactCollection",
                contentType: 'application/json',
                type: "POST",
                crossDomain: true,
                data: {
                "UserName":"Administrator 2",
                "UserPassword":"Administrator 2", 
                 },
            dataType: "json",
            success: function (response) {
                var resp = JSON.parse(response)
                alert(resp.status);
            },
            error: function (xhr, status) {
                alert("error");
            }
              
            });

           }); 
       
        };

                
                
                
                
                
            });
            
            
            
            LiveChat.init();
        </script>
  
    </head>
    <body>
        
        <div id="resultDivContainer"></div>
        
        <div class="chat-plugin" id="chatPluginContainer">
            <ul class="chat-plugin__menu">
                <li class="chat-plugin__menu__item chat-plugin__menu__item--active"><a href=""><span class="app-icon app-icon-dashboard" title="Contact"></span></a></li>
            </ul>
            <section class="chat-plugin__content">
                <div class="chat-plugin__content--centered">
                    <p class="chat-plugin__p">
                     Hola!<br/>Seleccione un chat para ver el detalle.
                    </p>
                </div>
                <dl class="chat-plugin__dl">
                    <dt>Visitor ID</dt>
                    <dd id="visitorID"></dd>
                    <dt>Visitor Name</dt>
                    <dd id="visitorName"></dd>
                    <dt>Visitor Email</dt>
                    <dd id="visitorEmail"></dd>
                    <dt>Chat ID</dt>
                    <dd id="chatID"></dd>
                    <dt>Group ID</dt>
                    <dd id="groupID"></dd>
                    <dt>Bpm-Online URL</dt>
                    <dd id="visitorID"><a target="_blank" href="https://0384564-sales-enterprise-marketing-service-enterprise-demo.bpmonline.com/0/Nui/ViewModule.aspx#CardModuleV2/ContactPageV2/edit/a6f14ab1-5ab9-4c85-9c40-8cf5560919cc">Detalle Contacto</a></dd>
                </dl>
            </section>
        </div>
    </body>
</html>
