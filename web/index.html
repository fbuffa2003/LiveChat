<!DOCTYPE html>
<html lang=en>
    <head>
        <title>Sample App</title>
        <script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="//cdn.livechatinc.com/boilerplate/1.0.js"></script>
       
        <link rel="stylesheet" href="//cdn.livechatinc.com/boilerplate/1.0.css">
        <input type="text" name="txtuser" value= engineer>
        <input type="text" name="txtpass" value= engineer>
        <script type="text/javascript">
            function getPropertyValue(data, propertyName) {
                return undefined === data[propertyName] ? '' : data[propertyName];
            }
            LiveChat.on("customer_profile", function(data) {
                $('#visitorID').html(getPropertyValue(data, 'id'));
                $('#visitorName').html(getPropertyValue(data, 'name'));
                $('#visitorEmail').html(getPropertyValue(data, 'email'));
                $('#chatID').html(getPropertyValue(data.chat, 'id'));
                $('#groupID').html(getPropertyValue(data.chat, 'groupID'));
                $('#BpmUrl').html(getPropertyValue(data.chat, 'BpmUrl'));
            });
            
            
            
            LiveChat.init();
        </script>
        
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">

        JSONTest = function() {

            var resultDiv = $("#resultDivContainer");
      $(document).ready(function () {
            $.ajax({
                url: "https://0384564-sales-enterprise-marketing-service-enterprise-demo.bpmonline.com/ServiceModel/AuthService.svc/Login",
                contentType: 'application/json',
                type: "POST",
                crossDomain: true,
                data: {
                "UserName":"Administrator 1",
                "UserPassword":"Administrator 1", 
                 },
            dataType: "json",
            success: function (response) {
                var resp = JSON.parse(response)
                alert(resp.status);
            },
            error: function (xhr, status) {
                alert("error");
            }
              
            });
            
            response = HttpResponse(json.dumps('{"status" : "success"}'))
            response.__setitem__("Content-type", "application/json")
            response.__setitem__("Access-Control-Allow-Origin", "*")

           }); 
            
            function Set_Cookie( name, value, expires, path, domain, secure )
            {
            // set time, it's in milliseconds
            var today = new Date();
            today.setTime( today.getTime() );

            /*
            if the expires variable is set, make the correct
            expires time, the current script below will set
            it for x number of days, to make it for hours,
            delete * 24, for minutes, delete * 60 * 24
            */
            if ( expires )
            {
            expires = expires * 1000 * 60 * 60 * 24;
            }
            var expires_date = new Date( today.getTime() + (expires) );

            document.cookie = name + "=" +escape( value ) +
            ( ( expires ) ? ";expires=" + expires_date.toGMTString() : "" ) +
            ( ( path ) ? ";path=" + path : "" ) +
            ( ( domain ) ? ";domain=" + domain : "" ) +
            ( ( secure ) ? ";secure" : "" );
            }
            
            
            
            
            
        };

        </script>
   
        
    </head>
    <body>
        
        <div id="resultDivContainer"></div>
        <button type="button" onclick="JSONTest()">JSON</button>
        <div class="chat-plugin" id="chatPluginContainer">
            <ul class="chat-plugin__menu">
                <li class="chat-plugin__menu__item chat-plugin__menu__item--active"><a href=""><span class="app-icon app-icon-dashboard" title="Contact"></span></a></li>
            </ul>
            <section class="chat-plugin__content">
                <div class="chat-plugin__content--centered">
                    <p class="chat-plugin__p">
                     Hola!<br/>Seleccione un chat para ver el detalle.
                    </p>
                </div>
                <dl class="chat-plugin__dl">
                    <dt>Visitor ID</dt>
                    <dd id="visitorID"></dd>
                    <dt>Visitor Name</dt>
                    <dd id="visitorName"></dd>
                    <dt>Visitor Email</dt>
                    <dd id="visitorEmail"></dd>
                    <dt>Chat ID</dt>
                    <dd id="chatID"></dd>
                    <dt>Group ID</dt>
                    <dd id="groupID"></dd>
                    <dt>Bpm-Online URL</dt>
                    <dd id="visitorID"><a target="_blank" href="https://0384564-sales-enterprise-marketing-service-enterprise-demo.bpmonline.com/0/Nui/ViewModule.aspx#CardModuleV2/ContactPageV2/edit/a6f14ab1-5ab9-4c85-9c40-8cf5560919cc">Detalle Contacto</a></dd>
                </dl>
            </section>
        </div>
    </body>
</html>
